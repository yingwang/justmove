<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>JustMove - Rhythm Dance Game</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- Start Screen -->
  <div id="start-screen" class="screen active">
    <div class="floating-particles" aria-hidden="true">
      <span class="particle">ðŸŽµ</span>
      <span class="particle">ðŸŽ¶</span>
      <span class="particle">ðŸ’ƒ</span>
      <span class="particle">ðŸ•º</span>
      <span class="particle">âœ¨</span>
      <span class="particle">ðŸŽµ</span>
      <span class="particle">ðŸŽ¶</span>
      <span class="particle">ðŸ’ƒ</span>
    </div>
    <div class="title-container">
      <div class="title-icon">ðŸ•º</div>
      <h1>JUST<span class="accent">MOVE</span></h1>
    </div>
    <div class="start-content">
      <div class="song-select">
        <h2>Choose Your Track</h2>
        <div class="song-list">
          <button class="song-btn selected" data-song="pop-dance-beat">
            <span class="song-icon">ðŸŽ¤</span>
            <span class="song-name">Let's Meet Michelle</span>
            <span class="song-meta"><span class="song-bpm">120 BPM</span> Â· <span class="song-difficulty easy">Easy</span></span>
          </button>
          <button class="song-btn" data-song="tropical-house">
            <span class="song-icon">ðŸŒ´</span>
            <span class="song-name">Breeze Groove</span>
            <span class="song-meta"><span class="song-bpm">110 BPM</span> Â· <span class="song-difficulty easy">Easy</span></span>
          </button>
          <button class="song-btn" data-song="afrobeats-rhythm">
            <span class="song-icon">ðŸŽ§</span>
            <span class="song-name">Hip-Hop Cypher</span>
            <span class="song-meta"><span class="song-bpm">95 BPM</span> Â· <span class="song-difficulty medium">Medium</span></span>
          </button>
          <button class="song-btn" data-song="dnb-breakbeat">
            <span class="song-icon">âš¡</span>
            <span class="song-name">Drive Breakbeat</span>
            <span class="song-meta"><span class="song-bpm">160 BPM</span> Â· <span class="song-difficulty hard">Hard</span></span>
          </button>
          <button class="song-btn" data-song="high-energy-trap">
            <span class="song-icon">ðŸ”¥</span>
            <span class="song-name">High Energy Trap</span>
            <span class="song-meta"><span class="song-bpm">150 BPM</span> Â· <span class="song-difficulty hard">Hard</span></span>
          </button>
        </div>
      </div>
      <div class="custom-audio-toggle">
        <button id="toggle-custom-audio" class="btn-toggle" type="button">ðŸŽµ Use Your Own Music</button>
      </div>
      <div class="custom-audio-section hidden" id="custom-audio-section">
        <div class="custom-audio-controls">
          <label class="btn-upload" id="upload-label">
            <input type="file" id="audio-upload" accept="audio/*" hidden>
            <span>Choose Audio File</span>
          </label>
          <span id="audio-file-name" class="audio-file-name"></span>
        </div>
        <div id="audio-loading-status" class="audio-loading-status hidden"></div>
        <div class="custom-audio-options hidden" id="custom-audio-options">
          <label class="difficulty-label">Difficulty:</label>
          <select id="custom-difficulty" class="custom-select">
            <option value="easy">Easy</option>
            <option value="medium" selected>Medium</option>
            <option value="hard">Hard</option>
          </select>
        </div>
      </div>
      <button id="start-btn" class="btn-primary">â–¶ PLAY</button>
      <p class="pixabay-attribution">Music from <a href="https://pixabay.com/music/" target="_blank" rel="noopener">Pixabay</a></p>
    </div>
  </div>

  <!-- Game Screen -->
  <div id="game-screen" class="screen">
    <video id="webcam" autoplay playsinline></video>
    <canvas id="pose-canvas"></canvas>
    <canvas id="game-canvas"></canvas>

    <!-- HUD -->
    <div id="hud">
      <div class="hud-left">
        <div id="score-display">
          <span class="label">SCORE</span>
          <span id="score-value">0</span>
        </div>
        <div id="combo-display">
          <span class="label">COMBO</span>
          <span id="combo-value">0</span>
        </div>
      </div>
      <div class="hud-center">
        <div id="rating-popup"></div>
        <div id="timing-hint"></div>
        <div id="song-progress">
          <div id="progress-bar"></div>
        </div>
      </div>
      <div class="hud-right">
        <div id="multiplier-display">
          <span class="label">MULTIPLIER</span>
          <span id="multiplier-value">x1</span>
        </div>
      </div>
    </div>

    <!-- Countdown -->
    <div id="countdown" class="hidden">
      <span id="countdown-number">3</span>
    </div>

    <!-- Pose Target Display -->
    <div id="pose-target-container">
      <canvas id="target-pose-canvas"></canvas>
      <div id="pose-name"></div>
    </div>

    <!-- Combo Milestone Banner -->
    <div id="combo-milestone"></div>

    <!-- Beat Timeline -->
    <div id="beat-timeline">
      <div id="beat-hit-zone"></div>
      <div id="beat-markers"></div>
    </div>
  </div>

  <!-- Results Screen -->
  <div id="results-screen" class="screen">
    <div class="results-container">
      <h1>RESULTS</h1>
      <div id="final-grade"></div>
      <div id="best-score-display"></div>
      <div class="results-stats">
        <div class="stat">
          <span class="stat-label">Final Score</span>
          <span id="final-score" class="stat-value">0</span>
        </div>
        <div class="stat">
          <span class="stat-label">Max Combo</span>
          <span id="final-combo" class="stat-value">0</span>
        </div>
        <div class="stat">
          <span class="stat-label">Perfect</span>
          <span id="final-perfect" class="stat-value">0</span>
        </div>
        <div class="stat">
          <span class="stat-label">Great</span>
          <span id="final-great" class="stat-value">0</span>
        </div>
        <div class="stat">
          <span class="stat-label">Good</span>
          <span id="final-good" class="stat-value">0</span>
        </div>
        <div class="stat">
          <span class="stat-label">Miss</span>
          <span id="final-miss" class="stat-value">0</span>
        </div>
      </div>
      <div class="results-buttons">
        <button id="retry-btn" class="btn-primary">PLAY AGAIN</button>
        <button id="menu-btn" class="btn-secondary">MAIN MENU</button>
      </div>
    </div>
  </div>

  <!-- Loading Overlay -->
  <div id="loading-overlay" class="hidden">
    <div class="loader"></div>
    <p id="loading-text">Loading MediaPipe...</p>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/holistic@0.5.1675471629/holistic.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils@0.3.1675466862/camera_utils.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils@0.3.1675466124/drawing_utils.js"></script>
  <script src="game.js"></script>
</body>
</html>
